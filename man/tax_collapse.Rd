% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{tax_collapse}
\alias{tax_collapse}
\title{Collapse Taxonomy Table to a Specific Level}
\usage{
tax_collapse(intable, tax, top_n = 9)
}
\arguments{
\item{intable}{A data frame containing at least a `clade_name` column and sample abundance columns.
The `clade_name` column should contain taxonomy strings separated by `|`.}

\item{tax}{A character string specifying the taxonomic level to collapse to.
One of: `"kingdom"`, `"phylum"`, `"class"`, `"order"`, `"family"`, `"genus"`, `"species"`.}

\item{top_n}{Integer. Number of top taxa to keep before collapsing others into "Others". Default = 9.}
}
\value{
A list with three elements:
\describe{
  \item{`outtable`}{Wide-format table collapsed at the specified taxonomic level, ordered by abundance.}
  \item{`outtable_topN`}{Wide-format table collapsed to top N taxa plus "Others" if applicable.}
  \item{`outtable_long`}{Long-format version of `outtable_topN`.}
}
}
\description{
Extract and aggregate a taxonomy abundance table at a specified taxonomic level
(e.g., kingdom, phylum, class, etc.). Automatically detects sample columns and
optionally collapses to the top N most abundant taxa plus an "Others" category.
}
\examples{
\dontrun{
# Collapse at genus level, keep top 15 taxa + Others
tax_collapse(intable = my_tax_table, tax = "genus", top_n = 15)
}

}
